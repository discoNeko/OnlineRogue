(function(){function ea(a,b,c,e,d){for(var g=[],f=[],k=[],n=[],h=0;4>h;h++)k[h]=Math.floor(10*Math.random())+1,n[h]=Math.floor(10*Math.random())+1;for(g[0]=a-k[0];!(g[1]=Math.floor(250*Math.random()),g[1]>=a&&g[1]<c||g[1]+k[1]>=a&&g[1]+k[1]<c););for(g[2]=c;!(g[3]=Math.floor(250*Math.random()),g[3]>=a&&g[3]<c||g[3]+k[3]>=a&&g[3]+k[3]<c););for(;!(f[0]=Math.floor(250*Math.random()),f[0]>=b&&f[0]<e||f[0]+n[0]>=b&&f[0]+n[0]<e););for(f[1]=b-n[1];!(f[2]=Math.floor(250*Math.random()),f[2]>=b&&f[2]<e||f[2]+
n[2]>=b&&f[2]+n[2]<e););f[3]=e;for(h=0;4>h;h++)if(d!=h){a=!0;b=g[h];c=g[h]+k[h];e=f[h];for(var l=f[h]+n[h],p=b;p<c;p++)for(var u=e;u<l;u++)if(-1<p&&250>p&&-1<u&&250>u&&!q[p][u])q[p][u]=!0;else{a=!1;p=c;break}a&&ea(b,e,c,l,h)}}function fa(){for(var a=0;250>a;a++)q[a]=[];for(var b=Math.floor(10*Math.random())+125,c=Math.floor(10*Math.random())+125,B=Math.floor(10*Math.random())+1+b,d=Math.floor(10*Math.random())+1+c,a=b;a<B;a++)for(var g=c;g<d;g++)q[a][g]=!0;ea(b,c,B,d,-1);for(a=0;250>a;a++)q[a][0]=
!1,q[0][a]=!1,q[a][249]=!1,q[249][a]=!1;for(;;)if(a=Math.floor(250*Math.random()),g=Math.floor(250*Math.random()),q[a][g]){e.x=25*a;e.y=25*g;break}for(a=0;250>a;a++){b="";for(g=0;250>g;g++)b=q[a][g]?b+"O":b+"\u25a0";console.log(b)}}function ga(){for(var a=0,b=0;250>b;b++)for(var c=0;250>c;c++)q[b][c]&&a++;return a}function Y(a){var b=e.x,c=e.y,B=e.dir;2==B?c+=25:4==B?b-=25:6==B?b+=25:8==B&&(c-=25);if(4>a){a=B/2-1;if(1==a||2==a)return t(b-60,c-15,150,50,a,2,0),t(b-60,c-20,150,50,a,2,0),t(b-60,c-5,
150,50,a,2,0),t(b-60,c,150,50,a,2,0),0;if(0==a||3==a)return t(b-15,c-60,50,150,a,2,0),t(b-20,c-60,50,150,a,2,0),t(b-5,c-60,50,150,a,2,0),t(b,c-60,50,150,a,2,0),0}if(4==a)return b=e.x-75,c=e.y-30,t(b,c,180,100,a,2,0),t(b,c-35,180,100,a,2,0),t(b-35,c+20,180,100,a,2,0),t(b+35,c+20,180,100,a,2,0),t(b,c+35,180,100,a,3,15),t(b-35,c-20,180,100,a,3,15),t(b+35,c-20,180,100,a,3,15),t(b,c-35-35,180,100,a,3,40),t(b-35-35,c+20+20,180,100,a,3,40),t(b+35+35,c+20+20,180,100,a,3,40),0;6==a&&t(b-50,c-40,120,80,a,2,
0)}function t(a,b,c,e,d,g,f){for(var k=0;100>k;k++)if(!m[k].exist){m[k].exist=!0;m[k].x=a;m[k].y=b;m[k].sizex=c;m[k].sizey=e;m[k].num=d;m[k].img.src="eff/eff"+d+".png";a=b=1;switch(d){case 0:b=9;a=1;break;case 1:b=9;a=1;break;case 2:b=9;a=1;break;case 3:b=9;a=1;break;case 4:b=1;a=9;break;case 5:b=5;a=1;break;case 6:b=7,a=1}d=b;m[k].divx=d;m[k].divy=a;m[k].width=Math.floor(m[k].img.width/d);m[k].height=Math.floor(m[k].img.height/a);1>g&&(g=1);m[k].spd=g;m[k].delay=f;m[k].mwait=0;Z=!0;break}}function ha(){d.fillStyle=
"#aaa";d.fillRect(0,0,800,600);d.fillStyle="#222";d.fillRect(5,5,790,590);d.font="bold 40px Meiryo";d.strokeStyle="#333";d.lineWidth=6;d.lineJoin="round";d.fillStyle="#fff";0<e.attack_interval&&(e.attack_interval-=15);0>e.attack_interval&&(e.attack_interval=0);e.mwait+=3;400<e.mwait&&(e.mwait=0);for(var a=0;a<Q;a++)0<f[a].damaged&&(f[a].damaged-=5);for(var a=!0,b=0;b<J;b++)if(!M[b].done){a=!1;x(M[b].x,M[b].y,M[b].s);M[b].done=!0;break}a&&(J=0);a=!0;for(b=0;b<K;b++)D[b].done||(a=!1,0<D[b].delay?D[b].delay--:
(D[b].done=!0,T(D[b].sx,D[b].sy,D[b].gx,D[b].gy,D[b].dmg)));a&&(K=0);H[65]&&(x(-1,0,3),U(4));H[83]&&(x(0,1,3),U(2));H[68]&&(x(1,0,3),U(6));H[87]&&(x(0,-1,3),U(8));if(H[13]){a=Math.round(e.x/25);b=Math.round(e.y/25);switch(e.dir){case 2:b++;break;case 4:a--;break;case 6:a++;break;case 8:b--}if(-1<a&&250>a&&-1<b&&250>b)if(0<I[a][b]&&5!=I[a][b]){switch(I[a][b]){case 1:e.hp+=Math.floor(40*Math.random());e.mn+=Math.floor(40*Math.random());e.hung+=Math.floor(40*Math.random());N("\u30a6\u30c3\u30d2\u30e7\u30fc\uff01");
break;case 2:e.hp+=20;N("\u4f53\u529b\u304c\u56de\u5fa9\u3057\u305f\uff01");break;case 3:e.mn+=30;N("\u30e1\u30f3\u30bf\u30eb\u30ea\u30bb\u30c3\u30c8\uff01");break;case 4:e.hung+=50,N("\u6e80\u8179\u306b\u306a\u3063\u305f\uff01")}I[a][b]=0}else(0==I[a][b]||!q[a][b])&&2<e.mn&&(q[a][b]=!0,0==I[a][b]&&(I[a][b]=-1),e.mn-=3,aa++,N("\u58c1\u3092\u58ca\u3057\u305f\uff01("+a+", "+b+")"));H[13]=!1}H[73]&&0==e.attack_interval&&0==J&&(V("flash\uff01\u3000"),e.attack_interval=e.delay,a=e.dir,4==a?(x(-1,0,76),
x(-1,0,26),x(-1,0,26)):2==a?(x(0,1,76),x(0,1,26),x(0,1,26)):6==a?(x(1,0,76),x(1,0,26),x(1,0,26)):(x(0,-1,76),x(0,-1,26),x(0,-1,26)),Y(6),a=R(20,20,8),b=R(20,20,2),T(a.sx,a.gy,b.gx,b.gy,170));H[79]&&0==e.attack_interval&&0==J&&(V("\u56de\u8ee2\uff01\u3000"),e.attack_interval=e.delay,a=R(40,40,8),b=R(40,40,2),T(a.sx,a.gy,b.gx,b.gy,170),P(a.sx,a.gy+35,b.gx,b.gy+35,70,15),P(a.sx-35,a.gy-20,b.gx-35,b.gy-20,70,15),P(a.sx+35,a.gy-20,b.gx+35,b.gy-20,70,15),P(a.sx,a.gy-35-35,b.gx,b.gy-35-35,30,40),P(a.sx-
35-35,a.gy+20+20,b.gx-35-35,b.gy+20+20,30,40),P(a.sx+35+35,a.gy+20+20,b.gx+35+35,b.gy+20+20,30,40),Y(4));H[80]&&0==e.attack_interval&&0==J&&(-1!=G[0].indexOf("\u30c0\u30c3\u30b7\u30e5\uff01")?V("\u30c0\u30c3\u30b7\u30e5\uff01\u3000"):N("\u30c0\u30c3\u30b7\u30e5\uff01\u3000"),e.attack_interval=e.delay,a=e.dir,b=R(60,20,a),T(b.sx,b.sy,b.gx,b.gy,10),4==a?(w(-1,0,26,1),w(-1,0,8,5),w(-1,0,4,5),w(-1,0,2,5),w(-1,0,1,5)):2==a?(w(0,1,26,1),w(0,1,8,5),w(0,1,4,5),w(0,1,2,5),w(0,1,1,5)):6==a?(w(1,0,26,1),w(1,
0,8,5),w(1,0,4,5),w(1,0,2,5),w(1,0,1,5)):(w(0,-1,26,1),w(0,-1,8,5),w(0,-1,4,5),w(0,-1,2,5),w(0,-1,1,5)),Y(0));d.fillStyle="#070";d.fillRect(155,25,495,445);var a=Math.floor(e.x/25),b=Math.floor(e.y/25),c=Math.floor(e.x%25),B=Math.floor(e.y%25),F=a-10,g=b-9;d.save();d.beginPath();d.rect(165,35,475,425);d.clip();var F=ia(F,g),g=c,O=B;-1==F.xhit?g=0:1==F.xhit&&(g=25);-1==F.yhit?O=0:1==F.yhit&&(O=25);for(var k=0;20>k;k++)for(var n=0;18>n;n++){var h=F.mx+k,l=F.my+n,p=165+25*k-g,u=35+25*n-O;q[h][l]?(d.fillStyle=
"#a0a",d.drawImage(S,0,0,32,32,p,u,24,24)):(d.fillStyle="#aa0",d.drawImage(S,0,0,32,32,p,u,24,24),d.drawImage(S,224,0,32,32,p,u,24,24));-1!=I[h][l]&&d.drawImage(S,32+32*I[h][l],0,32,32,p,u,24,24)}if(Z){h=!1;d.save();d.beginPath();d.rect(165,35,475,425);d.clip();k=Math.floor(e.x/25)-10;n=Math.floor(e.y/25)-9;p=Math.floor(e.x%25);l=Math.floor(e.y%25);u=ia(k,n);k=u.mx;n=u.my;-1==u.xhit?p=0:1==u.xhit&&(p=25);-1==u.yhit?l=0:1==u.yhit&&(l=25);k=25*k+p;n=25*n+l;for(l=0;100>l;l++)if(m[l].exist)if(0<m[l].delay)m[l].delay--;
else{m[l].mwait++;var h=m[l].width,p=m[l].height,u=m[l].divx,r=m[l].divy,E=m[l].mwait,z=m[l].spd;d.drawImage(m[l].img,Math.floor(E/z)%u*h,Math.floor(Math.floor(E/z)/u)*p,h,p,165+m[l].x-k,35+m[l].y-n,m[l].sizex,m[l].sizey);E>=u*r*z-1&&(m[l].exist=!1);h=!0}h||(Z=!1);d.restore()}u=p=0;-1==F.xhit?p=-c:1==F.xhit&&(p=25-c);-1==F.yhit?u=-B:1==F.yhit&&(u=25-B);for(n=0;18>n;n++)for(k=0;20>k;k++)if(h=F.mx+k,l=F.my+n,b==l&&a==h){for(c=-1;2>c;c++)if(!(0>h+c||249<h+c))for(var v in C[h+c][l])r=C[h+c][l][v]|0,E=
f[r].x%25|0,z=f[r].y%25|0,z>=B||ba(165+25*(k+c)-2+E-g,35+25*n-15+z-O,r);var c=165+25*k-2-p,r=35+25*n-15-u,E=e.dir,z=Math.floor(e.mwait/100),t=e.width,y=e.height;2<z&&(z=1);d.lineWidth="1";d.strokeStyle="red";d.rect(c,r+15,10+t,10+y);d.rect(c-15,r,40+t,40+y);2==E?(d.rect(c,r+15+130,10+t,10+y),d.rect(c-10,r+15-10,30+t,30+y+60)):4==E?(d.rect(c-130,r+15,10+t,10+y),d.rect(c-10-60,r+15-10,30+t+60,30+y)):6==E?(d.rect(c+130,r+15,10+t,10+y),d.rect(c-10,r+15-10,30+t+60,30+y)):8==E&&(d.rect(c,r+15-130,10+t,
10+y),d.rect(c-10,r+15-10-60,30+t,30+y+60));d.stroke();switch(E){case 2:d.drawImage(e.img,20*z,0,20,28,c,r,28,38);break;case 4:d.drawImage(e.img,20*z,28,20,28,c,r,28,38);break;case 6:d.drawImage(e.img,20*z,56,20,28,c,r,28,38);break;case 8:d.drawImage(e.img,20*z,84,20,28,c,r,28,38)}for(c=-1;2>c;c++)if(!(0>h+c||249<h+c))for(v in C[h+c][l])r=C[h+c][l][v]|0,E=f[r].x%25|0,z=f[r].y%25|0,z<B||ba(165+25*(k+c)-2+E-g,35+25*n-15+z-O,r);k++}else for(v in C[h][l])r=C[h][l][v]|0,E=f[r].x%25|0,z=f[r].y%25|0,ba(165+
25*k-2+E-g,35+25*n-15+z-O,r);d.restore();d.fillStyle="#ddd";d.fillRect(15,480,635,105);d.fillRect(15,25,130,445);d.fillRect(660,25,125,560);d.fillStyle="#333";d.font="bold 20px Meiryo";d.fillText("\u5730\u4e0b",30,70);d.fillText("\u968e",115,70);d.drawImage(W,0,0,64,64,30,98,30,30);d.drawImage(W,64,0,64,64,30,148,30,30);d.drawImage(W,128,0,64,64,30,198,30,30);d.fillText("Hunt",30,255);d.fillText("Dig",30,305);d.fillText(ca,78,277);d.fillText(aa,78,327);d.font="bold 30px Meiryo";d.fillText(X,78,72);
d.fillText(e.hp,70,125);d.fillText(e.mn,70,175);d.fillText(e.hung,70,225);d.fillStyle="#577";d.fillRect(30,350,100,1);d.fillRect(30,350,1,100);d.fillRect(130,350,1,100);d.fillRect(30,450,101,1);d.fillStyle="#999";for(v=0;100>v;v++)for(a=Math.floor(250*v/100),b=0;100>b;b++)q[a][Math.floor(250*b/100)]&&d.fillRect(30+v,350+b,1,1);2>X&&(d.fillStyle="#a33",d.fillRect(30+Math.floor(100*e.x/25/250)-2,350+Math.floor(100*e.y/25/250)-2,4,4));4>X&&(d.fillStyle="#3a3",d.globalAlpha=e.mwait%100/100,d.fillRect(30+
Math.floor(100*f[0].x/25/250)-2,350+Math.floor(100*f[0].y/25/250)-2,4,4),d.globalAlpha=1);d.font="bold 15px Meiryo";H[76]?(80>A&&(A+=8),88>A&&(A+=2),96>A&&(A+=2),100>A&&(A+=2)):0<A&&(20<A&&(A-=8),12<A&&(A-=2),4<A&&(A-=2),0<A&&(A-=2));if(0<A){v=A/100;d.fillStyle="#ddd";d.save();d.beginPath();d.rect(15,480-Math.floor(455*v),635,105+Math.floor(455*v));d.clip();d.fillRect(15,480-Math.floor(455*v),635,105+Math.floor(455*v));d.fillStyle="#333";for(v=0;27>v;v++)d.fillText(G[v],20,578-20*v);d.restore()}else for(d.fillStyle=
"#333",v=0;5>v;v++)d.fillText(G[v],20,578-20*v);1>e.hp&&(d.fillStyle="#fff",d.font="bold 120px Meiryo",d.fillText("\u6b7b\u3093\u3060\uff01",180,300),d.font="bold 40px Meiryo",d.fillText("Enter : restart",230,380));window.requestAnimationFrame(ha)}function ia(a,b){var c=0,e=0;0>a&&(a=0,c=-1);250<a+20&&(a=230,c=1);0>b&&(b=0,e=-1);250<b+18&&(b=232,e=1);return{mx:a,my:b,xhit:c,yhit:e}}function ba(a,b,c){var B=Math.floor(e.mwait/100);2<B&&(B=1);d.drawImage(f[c].img,20*B,0,20,28,a,b,28,38);0<f[c].damaged&&
(console.log("aaaaaaa"),0==f[c].damaged%20&&(d.globalCompositeOperation="color-dodge"),d.drawImage(f[c].img,20*B,0,20,28,a,b,28,38),d.drawImage(f[c].img,20*B,0,20,28,a,b,28,38),d.globalCompositeOperation="source-over")}function U(a){e.mwait+=10;e.dir=a}function x(a,b,c){a=la(a*c,b*c);a.move&&(80>e.mn&&(e.mn+=1),e.x+=a.qx,e.y+=a.qy)}function la(a,b){var c=a,d=b,f=e.x+c,g=e.y+d;0>f&&(c-=f);0>g&&(d-=g);6225<=f&&(c=6225-e.x);6225<=g&&(d=6225-e.y);if(0==c&&0==d)return{move:!1,qx:c,qy:d};var f=e.x+c,g=
e.y+d,m=[Math.ceil(f/25),Math.floor(f/25)],k=[Math.ceil(g/25),Math.floor(g/25)],n=-1,h=-1;0<c?n=Math.ceil(f/25):0>c&&(n=Math.floor(f/25));0<d?h=Math.ceil(g/25):0>d&&(h=Math.floor(g/25));if(-1!=n){for(var l=!1,p=c,u=-1;2>u;u++)for(var r=-1;2>r;r++)if(!(0>n+u||249<n+u||0>k[1]+r||249<k[1]+r)){var t=ja(n+u,k[1]+r,f,g),l=l||t.hit;0<c&&(p=Math.min(p,t.dx));0>c&&(p=Math.max(p,-t.dx))}l&&(c=p);l=q[n][k[0]]?!1:!0;p=q[n][k[1]]?!1:!0;if(l||p)if(0<c&&(c=25*n-(e.x+25)),0>c&&(c=25*n-(e.x-25)),24<Math.abs(c)&&(n=
Math.floor((e.x+c)/25),q[n][k[0]]&&q[n][k[1]]||(c=0)),p&&!l&&d++,l&&!p&&d--,0==c&&0==d)return{move:!1,qx:c,qy:d}}if(-1!=h){l=!1;p=d;for(u=-1;2>u;u++)for(r=-1;2>r;r++)0>h+r||249<h+r||0>m[1]+u||249<m[1]+u||(t=ja(m[1]+u,h+r,f,g),l=l||t.hit,0<d&&(p=Math.min(p,t.dy)),0>d&&(p=Math.max(p,-t.dy)));l&&(d=p);f=q[m[0]][h]?!1:!0;g=q[m[1]][h]?!1:!0;if(f||g)if(0<d&&(d=25*h-(e.y+25)),0>d&&(d=25*h-(e.y-25)),24<Math.abs(d)&&(h=Math.floor((e.y+d)/25),q[m[0]][h]&&q[m[1]][h]||(d=0)),g&&!f&&c++,f&&!g&&c--,0==c&&0==d)return{move:!1,
qx:c,qy:d}}return{move:!0,qx:c,qy:d}}function ja(a,b,c,d){var q=!1,g=Number.MAX_VALUE,m=Number.MAX_VALUE,k;for(k in C[a][b]){var n=C[a][b][k]|0,h=f[n].x|0,l=h+f[n].width,p=f[n].y|0,n=p+f[n].height;c+e.width<h||l<c||d+e.height<p||n<d||(q=!0,g=Math.min(g,Math.abs(e.x-l),Math.abs(e.x+e.width-h)),m=Math.min(m,Math.abs(e.y-n),Math.abs(e.y+e.height-p)))}return{hit:q,dx:g,dy:m}}function R(a,b,c){var d,f=d=5;2==c?(d+=Math.floor(b/2),b=e.x-d,c=e.y-f,d=b+e.width+2*d,a=c+a+2*f):4==c?(f+=Math.floor(b/2),b=e.x+
e.width+d,c=e.y-f,d=b-a-2*d,a=c+2*f):6==c?(f+=Math.floor(b/2),b=e.x-d,c=e.y-f,d=b+a+2*d,a=c+e.height+2*f):(d+=Math.floor(b/2),b=e.x-d,c=e.y+e.height+f,d=b+2*d,a=c-a-2*f);return{sx:b+9,sy:c,gx:d+9,gy:a}}function T(a,b,c,d,e){if(a>c){var g=a;a=c;c=g}b>d&&(g=b,b=d,d=g);console.log("range "+a+" "+b+" "+c+" "+d);for(var q=Math.floor(b/25)-1,k=Math.ceil(c/25)+1,n=Math.ceil(d/25)+1,g=[],h=[],l=Math.floor(a/25)-1;l<k;l++)for(var p=q;p<n;p++)if(!(0>l||249<l||0>p||249<p))for(var m in C[l][p]){var r=C[l][p][m],
w=f[r].x|0,z=f[r].y|0,v=w+f[r].width,A=z+f[r].height;console.log("enemy "+w+" "+z+" "+v+" "+A);v<a||c<w||A<b||d<z||(g.push(r),h.push(e))}a=[];for(var y in g)b=g[y],t(f[b].x,f[b].y,40,40,5,2,0),f[g[y]].damaged=100,V(f[g[y]].name+"\u306b "+h[y]+" \u30c0\u30e1\u30fc\u30b8\uff01"),f[g[y]].hp-=h[y],0>=f[g[y]].hp&&a.push(g[y]);for(var x in a)y=Math.floor(f[a[x]].x/25),g=Math.floor(f[a[x]].y/25),h=C[y][g].indexOf(a[x]),C[y][g].splice(h,1),f[a[x]].exist=!1,ca++,N(f[a[x]].name+"\u3092\u5012\u3057\u305f\uff01")}
function P(a,b,c,d,e,f){if(500<=K)return 0;D[K].sx=a;D[K].sy=b;D[K].gx=c;D[K].gy=d;D[K].dmg=e;D[K].delay=f;D[K].done=!1;K++}function w(a,b,c,d){if(500<=J+d)return 0;for(var e=0;e<d;e++)M[J].x=a,M[J].y=b,M[J].s=c,M[J].done=!1,J++}function N(a){for(var b=26;-1<b;b--)G[b+1]=G[b];G[0]=a}function V(a){G[0]+=a;a=G[0].length;if(42<a){var b=G[0];G[0]=b.substring(0,42);N(b.substring(42,a))}}var X=0,ca=0,aa=0,S=new Image;S.src="img/map.png";var W=new Image;W.src="img/icon.png";for(var ma=function(){this.exist=
!1;this.y=this.x=-1;this.img=new Image;this.img.src="eff/eff0.png";this.mwait=0},m=[],Z=!1,ka=function(){this.y=this.x=-1;this.dir=2;this.width=18;this.height=15;this.name="sample";this.hp=100;this.mn=80;this.hung=100;this.exp=this.steps=0;this.exist=!0;this.img_num=1;this.img=new Image;this.img.src="img/1.png";this.mwait=0;this.equip=[-1,-1,-1,-1];this.atk=10;this.def=0;this["int"]=10;this.mnd=0;this.acc=80;this.damaged=this.luck=this.eva=0;this.spd=3;this.delay=240;this.interval=this.attack_interval=
0},e=new ka,Q=150,f=[],C=[],A=0,G=[],da=function(){this.spd=this.y=this.x=0;this.done=!1},J=0,M=[],L=0;500>L;L++)M[L]=new da;for(var da=function(){this.delay=this.dmg=this.gy=this.gx=this.sy=this.sx=0;this.done=!1},K=0,D=[],L=0;500>L;L++)D[L]=new da;var q=[],I=[],H=[],L=document.getElementById("canvas");L.addEventListener("click",function(a){var b=a.target.getBoundingClientRect();console.log("click "+Math.round(a.clientX-b.left)+" "+Math.round(a.clientY-b.top))},!1);L.addEventListener("mousemove",
function(a){a.target.getBoundingClientRect()},!1);var d=L.getContext("2d");(function(){fa();for(var a=Math.floor(6*Math.random()),b=0;250>b;b++)for(var c=0;250>c;c++){0==a&&(0==b%2&&0!=c%2&&(q[b][c]=!0),0!=b%2&&0==c%2&&(q[b][c]=!0));1==a&&0==b%2&&(q[b][c]=!0);2==a&&(0==b%2&&2*c<b&&b<250-2*c&&(q[b][c]=!0,q[249-b][249-c]=!0),0==c%2&&2*b<c&&c<250-2*b&&(q[b][c]=!0,q[249-b][249-c]=!0));if(3==a){var d=Math.floor(2*Math.random());if(0==d)continue;0==b%2&&2*c<b&&b<250-2*c&&(q[b][c]=!0,q[249-b][249-c]=!0);
0==c%2&&2*b<c&&c<250-2*b&&(q[b][c]=!0,q[249-b][249-c]=!0)}if(4==a&&0==b%2&&b==c)for(d=c;d<250-c;d++)q[d][b]=!0,q[b][d]=!0,q[249-d][249-b]=!0,q[249-b][249-d]=!0;5==a&&(d=Math.floor(2*Math.random()),0==d&&(q[b][c]=!0))}})();(function(){for(var a=0;250>a;a++){I[a]=[];for(var b=0;250>b;b++)I[a][b]=-1}for(a=Math.floor(20*Math.random())+10;0<a;){var b=Math.floor(250*Math.random()),c=Math.floor(250*Math.random());q[b][c]&&(I[b][c]=Math.floor(5*Math.random()));a--}})();(function(){for(var a=0;250>a;a++){C[a]=
[];for(var b=0;250>b;b++)C[a][b]=[]}Q=Math.floor(ga()/30);console.log("map void "+ga()+" enemy "+Q);for(a=0;a<Q;a++)for(f[a]=new ka,f[a].img_num=2,f[a].img.src="img/2.png";;){var b=Math.floor(6225*Math.random()),c=Math.floor(6225*Math.random());1==a&&(c=b=0);2==a&&(c=b=6225);var d=Math.floor(b/25),e=Math.floor(c/25),g=Math.ceil(b/25),m=Math.ceil(c/25);if(1==a){f[a].x=b;f[a].y=c;f[a].exist=!0;C[d][e].push(a);break}if(2==a){f[a].x=b;f[a].y=c;f[a].exist=!0;C[d][e].push(a);break}if(q[d][e]&&q[g][m]&&
q[g][e]&&q[d][m]){f[a].name="Enemy"+a;f[a].x=b;f[a].y=c;f[a].exist=!0;C[d][e].push(a);break}}f[0].img_num=3;f[0].img.src="img/3.png"})();(function(){for(var a=0;100>a;a++)m[a]=new ma})();(function(){for(var a=0;28>a;a++)G[a]="";G[0]="\u3088\u3046\u3053\u305d\uff01"})();window.requestAnimationFrame(ha);document.onkeydown=function(a){a=a.keyCode;console.log(a);if(1>e.hp)if(13==a){e.hp=100;e.mn=80;e.dir=2;e.hung=100;aa=ca=X=e.steps=0;fa();for(var b=0;250>b;b++)for(var c=0;250>c;c++)C[b][c]=-1;for(b=
0;b<Q;b++)for(;;){var c=Math.floor(6250*Math.random()),d=Math.floor(6250*Math.random());if(-1==C[c][d]){f[b].x=c;f[b].y=d;f[b].exist=!0;c=Math.floor(c/25);d=Math.floor(d/25);C[c][d].push(b);break}}N("\u3088\u3046\u3053\u305d\uff01")}else return 0;H[a]=!0};document.onkeyup=function(a){H[a.keyCode]=!1}})();